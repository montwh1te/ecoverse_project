document.addEventListener('DOMContentLoaded',function(){initMenu();initCarousel();initAccordion()});function initMenu(){const e=document.getElementById('menuToggle'),t=document.getElementById('navMenu');e&&t&&(e.addEventListener('click',function(){e.classList.toggle('active'),t.classList.toggle('active')}),t.querySelectorAll('a').forEach(t=>{t.addEventListener('click',function(){e.classList.remove('active'),t.classList.remove('active')})}),document.addEventListener('click',function(n){n.target.closest('.nav-main')||n.target.closest('.menu-toggle')||(e.classList.remove('active'),t.classList.remove('active'))}))}function initCarousel(){const e=document.getElementById('carousel'),t=document.getElementById('carouselPrev'),n=document.getElementById('carouselNext'),r=document.getElementById('carouselDots');if(!e)return;const o=e.querySelectorAll('.carousel-item');let a=0;function i(){o.forEach((e,t)=>{e.classList.remove('active'),t===a&&e.classList.add('active')}),r&&(r.querySelectorAll('.carousel-dot').forEach((e,t)=>{e.classList.remove('active'),t===a&&e.classList.add('active')})}r&&o.forEach((e,t)=>{const n=document.createElement('button');n.className=`carousel-dot ${0===t?'active':''}`,n.setAttribute('aria-label',`Slide ${t+1}`),n.addEventListener('click',()=>((a=t),i())),r.appendChild(n)});let l=setInterval(()=>{a=(a+1)%o.length,i()},5e3);n&&n.addEventListener('click',()=>{a=(a+1)%o.length,i()}),t&&t.addEventListener('click',()=>{a=(a-1+o.length)%o.length,i()}),e.addEventListener('mouseenter',()=>{clearInterval(l)}),e.addEventListener('mouseleave',()=>{l=setInterval(()=>{a=(a+1)%o.length,i()},5e3)})}function initAccordion(){document.querySelectorAll('.accordion-header').forEach(e=>{e.dataset.listenerAdded||(e.addEventListener('click',function(e){(e.target===this||e.target.closest('.accordion-header')===this)&&function(e){const t=e.nextElementSibling,n=e.querySelector('.accordion-icon'),r=t.classList.contains('active'),o=e.closest('.accordion');o&&(o.querySelectorAll('.accordion-content.active').forEach(e=>{e!==t&&e.classList.remove('active')}),o.querySelectorAll('.accordion-header .accordion-icon').forEach(e=>{e!==n&&(e.textContent='+')})),r?(t.classList.remove('active'),n.textContent='+'):(t.classList.add('active'),n.textContent='âˆ’')}(this)}),e.dataset.listenerAdded='true')})}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function validateContactForm(e,t,n,r){let o={};return e.trim().length<3&&(o.fullName='Nome deve ter pelo menos 3 caracteres'),validateEmail(t.trim())||(o.email='Email invÃ¡lido'),n.trim().length<5&&(o.subject='Assunto deve ter pelo menos 5 caracteres'),r.trim().length<10&&(o.message='Mensagem deve ter pelo menos 10 caracteres'),{isValid:0===Object.keys(o).length,errors:o}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener('click',function(e){const t=this.getAttribute('href');'#'!==t&&document.querySelector(t)&&(e.preventDefault(),document.querySelector(t).scrollIntoView({behavior:'smooth'}))})}),'IntersectionObserver'in window&&(new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src||n.src,n.classList.add('loaded'),t.unobserve(n)}})}).observe&&document.querySelectorAll('img[data-src]').forEach(e=>{new IntersectionObserver((t,n)=>{t.forEach(t=>{if(t.isIntersecting){const r=t.target;r.src=r.dataset.src||r.src,r.classList.add('loaded'),n.unobserve(r)}})}).observe(e)}));function animateOnScroll(){document.querySelectorAll('.product-card, .blog-card, .value-card, .why-item').forEach(e=>{new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.animation='fadeInUp 0.6s ease forwards',this.unobserve(e.target))})},{threshold:.1}).observe(e)})}document.addEventListener('DOMContentLoaded',animateOnScroll);const styleAnimate=document.createElement('style');styleAnimate.textContent=`@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}`,document.head.appendChild(styleAnimate);function scrollToTop(){window.scrollTo({top:0,behavior:'smooth'})}const scrollTopBtn=document.createElement('button');scrollTopBtn.id='scrollTopBtn',scrollTopBtn.innerHTML='â†‘',scrollTopBtn.style.cssText='position:fixed;bottom:20px;right:20px;padding:12px 20px;background-color:#2ecc71;color:white;border:none;border-radius:50%;cursor:pointer;display:none;z-index:99;font-size:1.4rem;box-shadow:0 4px 8px rgba(0,0,0,.15);transition:all .3s ease;',document.body.appendChild(scrollTopBtn),window.addEventListener('scroll',()=>{window.pageYOffset>300?scrollTopBtn.style.display='block':scrollTopBtn.style.display='none'}),scrollTopBtn.addEventListener('click',scrollToTop);function updateCartCount(){const e=localStorage.getItem('cartCount')||0,t=document.getElementById('cartBadge');t&&(t.textContent=e,t.style.display=e>0?'block':'none')}function addToCart(){let e=parseInt(localStorage.getItem('cartCount')||0);e+=parseInt(document.getElementById('quantity')?.value||1),localStorage.setItem('cartCount',e),updateCartCount(),showNotification(`${document.getElementById('quantity')?.value||1} item(ns) adicionado(s) ao carrinho!`,'success')}function showNotification(e,t='info'){const n=document.createElement('div');n.style.cssText=`position:fixed;top:20px;right:20px;padding:15px 20px;background-color:${'success'===t?'#2ecc71':'#3498db'};color:white;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,.2);z-index:1000;animation:slideIn .3s ease;max-width:300px;`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.style.animation='slideOut .3s ease',setTimeout(()=>n.remove(),300)},3e3)}const notificationStyle=document.createElement('style');notificationStyle.textContent=`@keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(400px);opacity:0}}`,document.head.appendChild(notificationStyle);function initFaqSearch(){const e=document.getElementById('faqSearch');e&&e.addEventListener('keyup',function(t){const n=t.target.value.toLowerCase();let r=0;document.querySelectorAll('.accordion-item').forEach(e=>{e.textContent.toLowerCase().includes(n)?(e.style.display='block',r++):e.style.display='none'}),0===r&&n.length>0&&showNotification('Nenhum resultado encontrado','info')})}document.addEventListener('DOMContentLoaded',initFaqSearch);function initShopFilters(){const e=document.querySelectorAll('.filter-checkbox'),t=document.querySelectorAll('input[name="price"]'),n=document.querySelectorAll('.product-card'),r=[{index:0,category:'casa',price:89.9},{index:1,category:'casa',price:45},{index:2,category:'casa',price:35.9},{index:3,category:'higiene',price:12.5},{index:4,category:'casa',price:28.9},{index:5,category:'higiene',price:25},{index:6,category:'moda',price:55},{index:7,category:'higiene',price:18.5}];e.forEach(e=>{e.addEventListener('change',()=>function(){const o=Array.from(e).filter(e=>e.checked).map(e=>e.value),a=Array.from(t).find(e=>e.checked)?.value;o.length||a,n.forEach((e,t)=>{let i=!0;const l=r[t];o.length>0&&(i=o.includes(l.category)),i&&a&&(i=l.price<=50);e.style.display=i?'flex':'none',e.style.animation=i?'fadeInUp .3s ease':'none'});const c=Array.from(n).filter(e=>'none'!==e.style.display);showNotification(`${c.length} produto(s) encontrado(s)`,'info')}())}),t.forEach(e=>{e.addEventListener('change',()=>function(){const o=Array.from(e).filter(e=>e.checked).map(e=>e.value);n.forEach((e,t)=>{let i=!0;const l=r[t];switch((o.length||Array.from(t).find(e=>e.checked)?.value)&&(o.length>0&&(i=o.includes(l.category)),a&&(i=l.price<=50)),a){case'ate-50':i=l.price<=50;break;case'50-100':i=l.price>50&&l.price<=100;break;case'100-200':i=l.price>100&&l.price<=200;break;case'acima-200':i=l.price>200}e.style.display=i?'flex':'none',e.style.animation=i?'fadeInUp .3s ease':'none'});const c=Array.from(n).filter(e=>'none'!==e.style.display);showNotification(`${c.length} produto(s) encontrado(s)`,'info')}())}})}document.addEventListener('DOMContentLoaded',initShopFilters);function changeMainImage(e){const t=document.getElementById('mainImage');t&&(t.style.opacity='.5',t.src=e,setTimeout(()=>{t.style.opacity='1'},200))}const styleImg=document.createElement('style');styleImg.textContent='#mainImage{transition:opacity .3s ease}',document.head.appendChild(styleImg);function submitContactForm(e){e.preventDefault();const t=document.getElementById('fullName')?.value||'',n=document.getElementById('email')?.value||'',r=document.getElementById('subject')?.value||'',o=document.getElementById('message')?.value||'';document.querySelectorAll('.form-error').forEach(e=>e.textContent='');const a=validateContactForm(t,n,r,o);if(!a.isValid)return void Object.keys(a.errors).forEach(e=>{const t=document.getElementById(`${e}Error`);t&&(t.textContent=a.errors[e])});const i=e.target;i.style.display='none';const l=document.getElementById('successMessage');l&&(l.style.display='block'),setTimeout(()=>{i.reset(),i.style.display='block',l&&(l.style.display='none')},3e3)}function subscribeNewsletter(e){e.preventDefault();const t=e.target.querySelector('input[type="email"]').value;validateEmail(t)?showSubscriptionPopup(t):showErrorPopup('Email invÃ¡lido')}function showSubscriptionPopup(e){const t=document.createElement('div');t.className='popup-overlay',t.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn .3s ease;';const n=document.createElement('div');n.className='subscription-popup',n.style.cssText='background:linear-gradient(135deg,#ffffff 0%,#f0fdf4 100%);border-radius:16px;padding:40px;max-width:450px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,.3);text-align:center;animation:popupSlideIn .4s cubic-bezier(0.34,1.56,0.64,1);border-left:5px solid #2ecc71;border-top:2px solid #3498db;';const r=document.createElement('div');r.style.cssText='font-size:64px;margin-bottom:20px;animation:popupBounce .6s ease;',r.textContent='âœ…';const o=document.createElement('h2');o.textContent='InscriÃ§Ã£o Realizada!',o.style.cssText='color:#2ecc71;margin:0 0 15px 0;font-family:\'Playfair Display\',serif;font-size:28px;font-weight:700;';const a=document.createElement('p');a.style.cssText='color:#555;margin:0 0 10px 0;font-size:16px;line-height:1.5;',a.textContent='Obrigado por se inscrever em nossa newsletter!';const i=document.createElement('p');i.style.cssText='background-color:#e8f8f5;color:#27ae60;padding:12px 16px;border-radius:8px;margin:15px 0;font-weight:600;border-left:3px solid #2ecc71;',i.textContent=`ðŸ“§ ${e}`;const l=document.createElement('p');l.style.cssText='color:#666;font-size:14px;margin:15px 0;line-height:1.6;',l.textContent='VocÃª receberÃ¡ nossos melhores artigos, dicas sustentÃ¡veis e promoÃ§Ãµes exclusivas diretamente no seu email!';const c=document.createElement('button');c.textContent='âœ“ Fechar',c.style.cssText='background:linear-gradient(135deg,#2ecc71 0%,#27ae60 100%);color:white;border:none;padding:12px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;margin-top:20px;transition:all .3s ease;box-shadow:0 4px 12px rgba(46,204,113,.3);',c.addEventListener('mouseover',function(){this.style.transform='translateY(-2px)',this.style.boxShadow='0 6px 16px rgba(46,204,113,.4)'}),c.addEventListener('mouseout',function(){this.style.transform='translateY(0)',this.style.boxShadow='0 4px 12px rgba(46,204,113,.3)'}),c.addEventListener('click',function(){t.style.animation='fadeOut .3s ease',n.style.animation='popupSlideOut .3s ease',setTimeout(()=>t.remove(),300)}),n.appendChild(r),n.appendChild(o),n.appendChild(a),n.appendChild(i),n.appendChild(l),n.appendChild(c),t.appendChild(n),document.body.appendChild(t),t.addEventListener('click',function(e){e.target===t&&(t.style.animation='fadeOut .3s ease',n.style.animation='popupSlideOut .3s ease',setTimeout(()=>t.remove(),300))})}function showErrorPopup(e){const t=document.createElement('div');t.className='popup-overlay',t.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn .3s ease;';const n=document.createElement('div');n.className='error-popup',n.style.cssText='background:linear-gradient(135deg,#ffffff 0%,#fff5f5 100%);border-radius:16px;padding:40px;max-width:450px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,.3);text-align:center;animation:popupSlideIn .4s cubic-bezier(0.34,1.56,0.64,1);border-left:5px solid #e74c3c;border-top:2px solid #c0392b;';const r=document.createElement('div');r.style.cssText='font-size:64px;margin-bottom:20px;animation:popupShake .5s ease;',r.textContent='âš ï¸';const o=document.createElement('h2');o.textContent='Oops!',o.style.cssText='color:#e74c3c;margin:0 0 15px 0;font-family:\'Playfair Display\',serif;font-size:28px;font-weight:700;';const a=document.createElement('p');a.textContent=e,a.style.cssText='background-color:#fadbd8;color:#c0392b;padding:12px 16px;border-radius:8px;margin:15px 0;border-left:3px solid #e74c3c;font-weight:600;';const i=document.createElement('button');i.textContent='âœ“ Entendido',i.style.cssText='background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%);color:white;border:none;padding:12px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;margin-top:20px;transition:all .3s ease;box-shadow:0 4px 12px rgba(231,76,60,.3);',i.addEventListener('mouseover',function(){this.style.transform='translateY(-2px)',this.style.boxShadow='0 6px 16px rgba(231,76,60,.4)'}),i.addEventListener('mouseout',function(){this.style.transform='translateY(0)',this.style.boxShadow='0 4px 12px rgba(231,76,60,.3)'}),i.addEventListener('click',function(){t.style.animation='fadeOut .3s ease',n.style.animation='popupSlideOut .3s ease',setTimeout(()=>t.remove(),300)}),n.appendChild(r),n.appendChild(o),n.appendChild(a),n.appendChild(i),t.appendChild(n),document.body.appendChild(t),t.addEventListener('click',function(e){e.target===t&&(t.style.animation='fadeOut .3s ease',n.style.animation='popupSlideOut .3s ease',setTimeout(()=>t.remove(),300))})}const popupStyles=document.createElement('style');popupStyles.textContent='@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes popupSlideIn{from{opacity:0;transform:scale(.8) translateY(-30px)}to{opacity:1;transform:scale(1) translateY(0)}}@keyframes popupSlideOut{from{opacity:1;transform:scale(1) translateY(0)}to{opacity:0;transform:scale(.8) translateY(-30px)}}@keyframes popupBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes popupShake{0%,100%{transform:translateX(0)}25%{transform:translateX(-10px)}75%{transform:translateX(10px)}}',document.head.appendChild(popupStyles),Element.prototype.closest||Object.defineProperty(Element.prototype,'closest',{value:function(e){for(let t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1}),console.log('EcoVerse - Script Principal Carregado com Sucesso!');
