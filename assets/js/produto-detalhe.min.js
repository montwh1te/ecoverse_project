/* ============================================
   PRODUTOS DATABASE - Din√¢mico
   ============================================ */

const produtos = {
    1: {
        nome: "Garrafa Reutiliz√°vel",
        precoOriginal: 89.90,
        precoAtual: 67.43,
        desconto: 25,
        imagem: "../assets/images/produto-1.webp",
        descricao: "Garrafa de vidro com prote√ß√£o t√©rmica premium. Mant√©m bebidas frias por 24h ou quentes por 12h. Design elegante e seguro para o dia a dia.",
        features: [
            "Vidro temperado resistente",
            "Prote√ß√£o t√©rmica 24h",
            "Livre de BPA",
            "Garantia de 2 anos"
        ],
        especificacoes: {
            "Material": "Vidro temperado + prote√ß√£o t√©rmica",
            "Capacidade": "750 ml",
            "Peso": "350g",
            "Dimens√µes": "8.5cm √ó 26cm",
            "Cores": "4 op√ß√µes",
            "Isolamento": "24h frio / 12h quente"
        },
        ambiental: [
            "&#x1f30d; Vidro 100% recicl√°vel",
            "&#x1f331; Zero pl√°stico t√≥xico",
            "&#x1f3ed; Produ√ß√£o sustent√°vel",
            "&#x1f4e6; Embalagem recicl√°vel",
            "&#x1f49a; Dur√°vel por muitos anos",
            "&#x1f333; Reutiliz√°vel indefinidamente"
        ],
        usageSteps: [
            "Lave com √°gua morna antes do uso",
            "Preencha com bebida desejada",
            "Feche bem a tampa",
            "Aproveite a bebida em temperatura ideal"
        ],
        careTips: [
            "Lavar com cuidado para n√£o quebrar",
            "Evitar choques t√©rmicos",
            "Secar bem antes de guardar",
            "N√£o expor ao freezer"
        ],
        rating: 4.5,
        reviews: 124,
        relatedProducts: [2, 3, 5, 7]
    },
    2: {
        nome: "Kit Utens√≠lios Bambu",
        precoOriginal: 49.90,
        precoAtual: 34.90,
        desconto: 30,
        imagem: "../assets/images/produto-2.webp",
        descricao: "Talheres e palhetas de bambu 100% biodegrad√°vel. Kit completo com garfo, faca, colher e duas palhetas reutiliz√°veis. Perfeito para levar √† escola ou trabalho.",
        features: [
            "100% bambu biodegrad√°vel",
            "5 pe√ßas no kit",
            "Bolsa de transporte inclu√≠da",
            "Sustent√°vel e eco-friendly"
        ],
        especificacoes: {
            "Material": "Bambu org√¢nico certificado",
            "Pe√ßas": "5 (garfo, faca, colher, 2 palhetas)",
            "Peso": "150g",
            "Dimens√µes": "Padr√£o (19cm)",
            "Acompanhamento": "Bolsa de lona",
            "Biodegrad√°vel": "Sim, em 6 meses"
        },
        ambiental: [
            "&#x1f30d; Bambu de crescimento r√°pido",
            "&#x1f331; 100% biodegr√°d√°vel",
            "&#x1f3ed; Zero qu√≠micos prejudiciais",
            "&#x1f4e6; Embalagem de papel",
            "&#x1f49a; Reduz res√≠duos pl√°sticos",
            "&#x1f333; Cultivo sustent√°vel"
        ],
        usageSteps: [
            "Retire o kit da bolsa",
            "Limpe com pano √∫mido antes de usar",
            "Use normalmente",
            "Lave ap√≥s cada refei√ß√£o"
        ],
        careTips: [
            "Lavar √† m√£o com √°gua",
            "Deixar secar completamente",
            "Guardar em local seco",
            "Compostar quando n√£o usar mais"
        ],
        rating: 4.6,
        reviews: 95,
        relatedProducts: [1, 3, 5, 8]
    },
    3: {
        nome: "Sacola Ecol√≥gica",
        precoOriginal: 55.90,
        precoAtual: 39.90,
        desconto: 29,
        imagem: "../assets/images/produto-3.jpg",
        descricao: "Sacola feita com algod√£o org√¢nico 100%. Resistente e dur√°vel para compras do dia a dia. Reduz o uso de sacolas pl√°sticas em at√© 500 por ano!",
        features: [
            "Algod√£o org√¢nico certificado",
            "Muito resistente",
            "M√∫ltiplos compartimentos",
            "Design moderno e elegante"
        ],
        especificacoes: {
            "Material": "Algod√£o 100% org√¢nico",
            "Capacidade": "25L",
            "Peso": "200g",
            "Dimens√µes": "42cm √ó 38cm √ó 12cm",
            "Al√ßas": "Refor√ßadas",
            "Resist√™ncia": "At√© 15kg"
        },
        ambiental: [
            "&#x1f30d; Algod√£o org√¢nico",
            "&#x1f331; Biodegr√°d√°vel completamente",
            "&#x1f3ed; Cultivo sem qu√≠micos",
            "&#x1f4e6; Reduz sacolas pl√°sticas",
            "&#x1f49a; Dur√°vel por anos",
            "&#x1f333; Sust√©m agricultores locais"
        ],
        usageSteps: [
            "Use para fazer compras",
            "Lave quando necess√°rio",
            "Deixe secar ao ar",
            "Reutilize indefinidamente"
        ],
        careTips: [
            "Lavar com √°gua fria",
            "Usar sab√£o neutro",
            "Secar naturalmente",
            "Guardar em local seco"
        ],
        rating: 4.4,
        reviews: 112,
        relatedProducts: [1, 2, 7, 8]
    },
    4: {
        nome: "Escova de Dentes Bambu",
        precoOriginal: 24.90,
        precoAtual: 16.50,
        desconto: 34,
        imagem: "../assets/images/produto-4.jpg",
        descricao: "Escova biodegrad√°vel com cerdas naturais. Pack com 3 unidades para toda a fam√≠lia. 100% sustent√°vel e eficaz na limpeza.",
        features: [
            "100% biodegrad√°vel",
            "Cerdas naturais macias",
            "Pack com 3 unidades",
            "Sustent√°vel e seguro"
        ],
        especificacoes: {
            "Quantidade": "3 escovas",
            "Material": "Bambu + cerdas naturais",
            "Peso": "45g cada",
            "Dimens√µes": "19cm √ó 1.5cm",
            "Biodegrad√°vel": "Sim, em 5 meses",
            "Durabilidade": "3-4 meses cada"
        },
        ambiental: [
            "&#x1f30d; Bambu sustent√°vel",
            "&#x1f331; 100% biodegr√°d√°vel",
            "&#x1f3ed; Zero micropl√°sticos",
            "&#x1f4e6; Embalagem de papel",
            "&#x1f49a; Reduz pl√°stico no oceano",
            "&#x1f333; N√£o usa cerdas sint√©ticas"
        ],
        usageSteps: [
            "Umede√ßa a escova",
            "Aplique pasta de dente",
            "Escove normalmente",
            "Lave com √°gua"
        ],
        careTips: [
            "Deixar secar em p√©",
            "Trocar a cada 3-4 meses",
            "Compostar quando desgastada",
            "Guardar em local seco"
        ],
        rating: 4.7,
        reviews: 143,
        relatedProducts: [1, 2, 5, 6]
    },
    5: {
        nome: "Copo Reutiliz√°vel",
        precoOriginal: 35.90,
        precoAtual: 25.90,
        desconto: 28,
        imagem: "../assets/images/produto-5.jpg",
        descricao: "Copo de bamboo com tampa herm√©tica. Ideal para bebidas quentes e frias. Design compacto e moderno que cabe em qualquer bolsa.",
        features: [
            "Bamboo natural e seguro",
            "Tampa herm√©tica",
            "Isolamento t√©rmico",
            "F√°cil de transportar"
        ],
        especificacoes: {
            "Capacidade": "450ml",
            "Material": "Bamboo + silicone alimentar",
            "Peso": "180g",
            "Dimens√µes": "8cm √ó 12cm",
            "Cores": "5 op√ß√µes",
            "Isolamento": "Quentes e frias"
        },
        ambiental: [
            "&#x1f30d; Bamboo 100% natural",
            "&#x1f331; Biodegr√°vel em 2 anos",
            "&#x1f3ed; Zero desperd√≠cio",
            "&#x1f4e6; Embalagem compost√°vel",
            "&#x1f49a; Reduz pl√°stico",
            "&#x1f333; Cultivo sustent√°vel"
        ],
        usageSteps: [
            "Lave antes do primeiro uso",
            "Preencha com bebida",
            "Feche a tampa",
            "Leve para qualquer lugar"
        ],
        careTips: [
            "Lavar √† m√£o com cuidado",
            "Deixar secar naturalmente",
            "Guardar sem tampa",
            "Evitar micro-ondas"
        ],
        rating: 4.5,
        reviews: 127,
        relatedProducts: [1, 2, 4, 6]
    },
    6: {
        nome: "Shampoo S√≥lido Natural",
        precoOriginal: 38.90,
        precoAtual: 27.50,
        desconto: 29,
        imagem: "../assets/images/produto-6.jpg",
        descricao: "Shampoo s√≥lido com ingredientes 100% naturais. Dura 3x mais que l√≠quido. Sem sulfatos, parabenos ou qu√≠micos prejudiciais. Apto para todos os tipos de cabelo.",
        features: [
            "100% ingredientes naturais",
            "Dura 3x mais",
            "Sem sulfatos",
            "Todos os tipos de cabelo"
        ],
        especificacoes: {
            "Peso": "75g",
            "Material": "Plantas e √≥leos naturais",
            "Rendimento": "250ml shampoo",
            "Tipo": "Universal",
            "Fragr√¢ncia": "√ìleos essenciais naturais",
            "Validade": "2 anos"
        },
        ambiental: [
            "&#x1f30d; Zero pl√°stico",
            "&#x1f331; Ingredientes org√¢nicos",
            "&#x1f3ed; Cruelty-free",
            "&#x1f4e6; Embalagem biodegr√°vel",
            "&#x1f49a; Reduz √°gua desperdicÃÅada",
            "&#x1f333; Carbono neutro"
        ],
        usageSteps: [
            "Umede√ßa o cabelo",
            "Esfregue o shampoo",
            "Fa√ßa espuma",
            "Enxague bem"
        ],
        careTips: [
            "Deixar secar entre usos",
            "Guardar em local seco",
            "Usar com √°gua filtrada",
            "Dura 3-4 meses"
        ],
        rating: 4.6,
        reviews: 156,
        relatedProducts: [1, 4, 5, 8]
    },
    7: {
        nome: "Bolsa Compras Sustent√°vel",
        precoOriginal: 65.90,
        precoAtual: 46.50,
        desconto: 29,
        imagem: "../assets/images/produto-7.jpg",
        descricao: "Bolsa em lona org√¢nica com compartimentos inteligentes. Perfeita para compras e uso di√°rio. Resistente e dur√°vel por muitos anos.",
        features: [
            "Lona 100% org√¢nica",
            "V√°rios compartimentos",
            "Muito resistente",
            "Design elegante"
        ],
        especificacoes: {
            "Material": "Lona org√¢nica",
            "Capacidade": "30L",
            "Peso": "450g",
            "Dimens√µes": "45cm √ó 40cm √ó 15cm",
            "Compartimentos": "4 principais",
            "Al√ßas": "Refor√ßadas"
        },
        ambiental: [
            "&#x1f30d; Lona 100% org√¢nica",
            "&#x1f331; Biodegr√°vel",
            "&#x1f3ed; Cultivo sustent√°vel",
            "&#x1f4e6; Embalagem m√≠nima",
            "&#x1f49a; Dur√°vel anos",
            "&#x1f333; Apoia comunidades locais"
        ],
        usageSteps: [
            "Use para compras",
            "Lave quando necess√°rio",
            "Seque ao ar",
            "Reutilize"
        ],
        careTips: [
            "Lavar com √°gua fria",
            "Sab√£o neutro",
            "Secar naturalmente",
            "Guardar seco"
        ],
        rating: 4.7,
        reviews: 98,
        relatedProducts: [1, 3, 5, 8]
    },
    8: {
        nome: "Desodorante Natural",
        precoOriginal: 32.90,
        precoAtual: 21.00,
        desconto: 36,
        imagem: "../assets/images/produto-8.jpg",
        descricao: "Desodorante natural livre de alum√≠nio e parabenos. F√≥rmula com √≥leos essenciais que mant√©m voc√™ fresco o dia todo sem prejudicar a sa√∫de.",
        features: [
            "Sem alum√≠nio",
            "Sem parabenos",
            "√ìleos essenciais naturais",
            "Longa dura√ß√£o"
        ],
        especificacoes: {
            "Peso": "50g",
            "Material": "√ìleos e ceras naturais",
            "Tipo": "Cremoso",
            "Fragr√¢ncia": "Lavanda e camomila",
            "Durabilidade": "3 meses aprox",
            "Embalagem": "Vidro recicl√°vel"
        },
        ambiental: [
            "&#x1f30d; Zero alum√≠nio",
            "&#x1f331; Ingredientes naturais",
            "&#x1f3ed; N√£o testado em animais",
            "&#x1f4e6; Vidro reutiliz√°vel",
            "&#x1f49a; 100% biodegrad√°vel",
            "&#x1f333; Apoia cooperativas"
        ],
        usageSteps: [
            "Aplique nas axilas limpas",
            "Distribua uniformemente",
            "Deixe secar",
            "Reaplicar conforme necess√°rio"
        ],
        careTips: [
            "Manter bem fechado",
            "Guardar em local fresco",
            "Agitar antes de usar",
            "Durabilidade maior em clima seco"
        ],
        rating: 4.6,
        reviews: 118,
        relatedProducts: [4, 5, 6, 7]
    }
};

// ============ CARREGAR PRODUTO DIN√ÇMICO ============
function carregarProduto() {
    // Obter ID da URL
    const params = new URLSearchParams(window.location.search);
    const produtoId = parseInt(params.get('id')) || 1;
    
    const produto = produtos[produtoId];
    
    if (!produto) {
        document.body.innerHTML = '<h1 style="text-align: center; padding: 50px;">Produto n√£o encontrado!</h1>';
        return;
    }
    
    // Atualizar t√≠tulo
    document.getElementById('productTitle').textContent = produto.nome;
    document.getElementById('breadcrumbProduct').textContent = produto.nome;
    
    // Atualizar pre√ßos
    document.getElementById('originalPrice').textContent = `R$ ${produto.precoOriginal.toFixed(2).replace('.', ',')}`;
    document.getElementById('currentPrice').textContent = `R$ ${produto.precoAtual.toFixed(2).replace('.', ',')}`;
    
    // Atualizar desconto
    document.getElementById('discountBadge').textContent = `-${produto.desconto}%`;
    
    // Atualizar descri√ß√£o
    document.getElementById('productDescription').textContent = produto.descricao;
    
    // Atualizar rating com estrelas corretas
    const starsCount = Math.floor(produto.rating);
    const hasHalfStar = produto.rating % 1 !== 0;
    const stars = '‚òÖ'.repeat(starsCount) + (hasHalfStar ? '‚òÜ' : '') + '‚òÜ'.repeat(5 - starsCount - (hasHalfStar ? 1 : 0));
    document.getElementById('productStars').textContent = stars;
    document.getElementById('productRating').textContent = `(${produto.reviews} avalia√ß√µes)`;
    
    // Atualizar features
    const featuresHTML = produto.features.map(f => `
        <div class="feature-item">
            <span class="feature-icon">‚úì</span>
            <span>${f}</span>
        </div>
    `).join('');
    document.getElementById('featuresContainer').innerHTML = featuresHTML;
    
    // Atualizar imagem
    carregarImagens(produto.imagem);
    
    // Atualizar especifica√ß√µes
    const specsHTML = Object.entries(produto.especificacoes).map(([label, value]) => `
        <div class="spec-row">
            <span class="spec-label">${label}:</span>
            <span class="spec-value">${value}</span>
        </div>
    `).join('');
    document.getElementById('specifications').innerHTML = specsHTML;
    
    // Atualizar info ambiental
    const ambiental = produto.ambiental.map(info => `<li>${info}</li>`).join('');
    document.getElementById('environmentalInfo').innerHTML = ambiental;
    
    // Atualizar instru√ß√µes de uso
    const steps = produto.usageSteps.map(step => `<li>${step}</li>`).join('');
    document.getElementById('usageSteps').innerHTML = steps;
    
    // Atualizar dicas de cuidado
    const tips = produto.careTips.map(tip => `<li>${tip}</li>`).join('');
    document.getElementById('careTips').innerHTML = tips;
    
    // Atualizar bot√£o adicionar ao carrinho
    document.getElementById('addToCartBtn').onclick = function() {
        const quantity = document.getElementById('quantity').value;
        const color = document.getElementById('color').value;
        showNotification(`‚úÖ ${quantity}x ${produto.nome} adicionado ao carrinho!`);
    };
    
    // Atualizar bot√£o favoritar
    document.getElementById('favoriteBtn').addEventListener('click', function() {
        this.classList.toggle('favorited');
        if (this.classList.contains('favorited')) {
            showNotification('‚ù§Ô∏è Adicionado aos favoritos!');
        } else {
            showNotification('üíî Removido dos favoritos');
        }
    });
    
    // Carregar produtos relacionados
    carregarProdutosRelacionados(produto.relatedProducts, produtoId);
}

// ============ CARREGAR IMAGEM ============
function carregarImagens(imagem) {
    const mainImage = document.getElementById('mainImage');
    mainImage.src = imagem;
    mainImage.alt = 'Imagem do produto';
    
    // Ocultar container de thumbnails j√° que temos apenas 1 imagem
    const thumbnailsContainer = document.getElementById('thumbnailsContainer');
    if (thumbnailsContainer) {
        thumbnailsContainer.style.display = 'none';
    }
}

// ============ CARREGAR PRODUTOS RELACIONADOS ============
function carregarProdutosRelacionados(relatedIds, produtoAtualId) {
    const htmlProdutos = relatedIds
        .filter(id => id !== produtoAtualId)
        .slice(0, 4)
        .map(id => {
            const prod = produtos[id];
            return `
                <div class="product-card">
                    <img src="${prod.imagem}" alt="${prod.nome}">
                    <h3>${prod.nome}</h3>
                    <p class="product-price">R$ ${prod.precoAtual.toFixed(2).replace('.', ',')}</p>
                    <a href="produto-detalhe.html?id=${id}" class="btn btn-secondary">Ver Detalhes</a>
                </div>
            `;
        }).join('');
    
    document.getElementById('relatedProductsGrid').innerHTML = htmlProdutos;
}

// ============ CONTROLES DE QUANTIDADE ============
document.addEventListener('DOMContentLoaded', function() {
    carregarProduto();
    
    document.getElementById('decreaseQty').addEventListener('click', function() {
        const qty = document.getElementById('quantity');
        if (qty.value > 1) qty.value--;
    });

    document.getElementById('increaseQty').addEventListener('click', function() {
        const qty = document.getElementById('quantity');
        if (qty.value < 50) qty.value++;
    });
});
